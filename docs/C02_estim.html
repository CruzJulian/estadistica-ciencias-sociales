<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-co" xml:lang="es-co"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="CruzJulián">

<title>Estimación – Estadística</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Estadística</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./intro.html"> 
<span class="menu-text">Introducción</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-descriptiva" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Descriptiva</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-descriptiva">    
        <li>
    <a class="dropdown-item" href="./C01_intro.html">
 <span class="dropdown-text">Introducción</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C01_univar.html">
 <span class="dropdown-text">Univariado</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C01_corr.html">
 <span class="dropdown-text">Correlacional</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-inferencial" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Inferencial</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-inferencial">    
        <li>
    <a class="dropdown-item" href="./C02_episteme.html">
 <span class="dropdown-text">Introducción</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C02_muestreo.html">
 <span class="dropdown-text">Muestreo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C02_estim.html">
 <span class="dropdown-text">Estimación</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C02_tamano.html">
 <span class="dropdown-text">Tamaño muestral</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./C02_hipotesis.html">
 <span class="dropdown-text">Hipótesis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./03_est-reg.html"> 
<span class="menu-text">Estadística III</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./04_est-multi.html"> 
<span class="menu-text">Estadística IV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">En esta página</h2>
   
  <ul>
  <li><a href="#conceptos-iniciales" id="toc-conceptos-iniciales" class="nav-link active" data-scroll-target="#conceptos-iniciales">Conceptos iniciales</a>
  <ul class="collapse">
  <li><a href="#parámetro" id="toc-parámetro" class="nav-link" data-scroll-target="#parámetro">Parámetro</a></li>
  <li><a href="#estimador" id="toc-estimador" class="nav-link" data-scroll-target="#estimador">Estimador</a></li>
  <li><a href="#muestra" id="toc-muestra" class="nav-link" data-scroll-target="#muestra">Muestra</a></li>
  <li><a href="#población" id="toc-población" class="nav-link" data-scroll-target="#población">Población</a></li>
  </ul></li>
  <li><a href="#estimación-puntual" id="toc-estimación-puntual" class="nav-link" data-scroll-target="#estimación-puntual">Estimación puntual</a>
  <ul class="collapse">
  <li><a href="#estimadores-y-parámetros" id="toc-estimadores-y-parámetros" class="nav-link" data-scroll-target="#estimadores-y-parámetros">Estimadores y parámetros</a></li>
  <li><a href="#aplicación-interactiva" id="toc-aplicación-interactiva" class="nav-link" data-scroll-target="#aplicación-interactiva">Aplicación interactiva</a></li>
  <li><a href="#ley-de-los-grandes-números" id="toc-ley-de-los-grandes-números" class="nav-link" data-scroll-target="#ley-de-los-grandes-números">Ley de los Grandes Números</a></li>
  <li><a href="#consistencia" id="toc-consistencia" class="nav-link" data-scroll-target="#consistencia">Consistencia</a></li>
  </ul></li>
  <li><a href="#estimación-por-intervalo" id="toc-estimación-por-intervalo" class="nav-link" data-scroll-target="#estimación-por-intervalo">Estimación por intervalo</a>
  <ul class="collapse">
  <li><a href="#precisión-y-exactitud" id="toc-precisión-y-exactitud" class="nav-link" data-scroll-target="#precisión-y-exactitud">Precisión y Exactitud</a>
  <ul class="collapse">
  <li><a href="#precisión" id="toc-precisión" class="nav-link" data-scroll-target="#precisión">Precisión</a></li>
  <li><a href="#exactitud" id="toc-exactitud" class="nav-link" data-scroll-target="#exactitud">Exactitud</a></li>
  <li><a href="#diferencias-entre-precisión-y-exactitud" id="toc-diferencias-entre-precisión-y-exactitud" class="nav-link" data-scroll-target="#diferencias-entre-precisión-y-exactitud">Diferencias entre Precisión y Exactitud</a></li>
  </ul></li>
  <li><a href="#ejemplo-introductorio" id="toc-ejemplo-introductorio" class="nav-link" data-scroll-target="#ejemplo-introductorio">Ejemplo introductorio</a>
  <ul class="collapse">
  <li><a href="#intervalo-de-confianza-para-la-media" id="toc-intervalo-de-confianza-para-la-media" class="nav-link" data-scroll-target="#intervalo-de-confianza-para-la-media">Intervalo de confianza para la media</a></li>
  <li><a href="#intervalo-de-confianza-para-una-proporción" id="toc-intervalo-de-confianza-para-una-proporción" class="nav-link" data-scroll-target="#intervalo-de-confianza-para-una-proporción">Intervalo de confianza para una proporción</a></li>
  <li><a href="#intervalo-de-confianza-para-la-varianza" id="toc-intervalo-de-confianza-para-la-varianza" class="nav-link" data-scroll-target="#intervalo-de-confianza-para-la-varianza">Intervalo de confianza para la varianza</a></li>
  </ul></li>
  <li><a href="#aplicación-interactiva-1" id="toc-aplicación-interactiva-1" class="nav-link" data-scroll-target="#aplicación-interactiva-1">Aplicación interactiva</a></li>
  <li><a href="#consistencia-1" id="toc-consistencia-1" class="nav-link" data-scroll-target="#consistencia-1">Consistencia</a></li>
  <li><a href="#construcción-de-los-intervalos-de-confianza" id="toc-construcción-de-los-intervalos-de-confianza" class="nav-link" data-scroll-target="#construcción-de-los-intervalos-de-confianza">Construcción de los intervalos de confianza</a></li>
  <li><a href="#ventajas-y-desventajas-de-la-construcción-analítica" id="toc-ventajas-y-desventajas-de-la-construcción-analítica" class="nav-link" data-scroll-target="#ventajas-y-desventajas-de-la-construcción-analítica">Ventajas y desventajas de la construcción analítica</a></li>
  <li><a href="#ventajas-y-desventajas-de-la-construcción-computacional" id="toc-ventajas-y-desventajas-de-la-construcción-computacional" class="nav-link" data-scroll-target="#ventajas-y-desventajas-de-la-construcción-computacional">Ventajas y desventajas de la construcción computacional</a></li>
  <li><a href="#fórmulas-para-algunos-intervalos" id="toc-fórmulas-para-algunos-intervalos" class="nav-link" data-scroll-target="#fórmulas-para-algunos-intervalos">Fórmulas para algunos intervalos</a></li>
  </ul></li>
  <li><a href="#bootstrapping" id="toc-bootstrapping" class="nav-link" data-scroll-target="#bootstrapping">Bootstrapping</a>
  <ul class="collapse">
  <li><a href="#ejemplo-diferencia-de-medias" id="toc-ejemplo-diferencia-de-medias" class="nav-link" data-scroll-target="#ejemplo-diferencia-de-medias">Ejemplo: Diferencia de medias</a></li>
  <li><a href="#ejemplo-diferencia-de-proporciones" id="toc-ejemplo-diferencia-de-proporciones" class="nav-link" data-scroll-target="#ejemplo-diferencia-de-proporciones">Ejemplo: Diferencia de proporciones</a></li>
  <li><a href="#bootstrapping-ejemplo" id="toc-bootstrapping-ejemplo" class="nav-link" data-scroll-target="#bootstrapping-ejemplo">Bootstrapping ejemplo</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Estimación</h1>
<p class="subtitle lead">Estadística inferencial</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>CruzJulián </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="conceptos-iniciales" class="level1">
<h1>Conceptos iniciales</h1>
<p>Iniciamos por los conceptos que son fundamentales para entender la estimación en inferencia estadística. Estos conceptos ayudan a diferenciar entre la población y la muestra, así como a identificar las características numéricas que se desea estimar.</p>
<section id="parámetro" class="level2">
<h2 class="anchored" data-anchor-id="parámetro">Parámetro</h2>
<p>Un <strong>parámetro</strong> es un valor numérico que describe una característica específica de una población completa. Ejemplos incluyen la media poblacional (μ), la varianza poblacional (σ²) o la proporción poblacional (P). Dado que los parámetros se refieren a poblaciones enteras, son constantes, pero, en la práctica, generalmente son desconocidos. Por lo tanto, se necesita recurrir a métodos estadísticos para estimarlos a partir de muestras.</p>
</section>
<section id="estimador" class="level2">
<h2 class="anchored" data-anchor-id="estimador">Estimador</h2>
<p>Un <strong>estimador</strong> es una regla o fórmula utilizada para aproximar un parámetro poblacional a partir de los datos muestrales. Un estimador es una variable aleatoria y, por lo tanto, puede variar de una muestra a otra. Los estimadores se utilizan para hacer inferencias sobre la población, y algunos ejemplos comunes incluyen la media muestral <span class="math inline">\(\bar{x}\)</span> y la proporción muestral <span class="math inline">\(\hat{p}\)</span>. La calidad de un estimador se evalúa en función de sus propiedades, como la consistencia y la unbiasedness (inexistencia de sesgo).</p>
</section>
<section id="muestra" class="level2">
<h2 class="anchored" data-anchor-id="muestra">Muestra</h2>
<p>Una <strong>muestra</strong> es un subconjunto de elementos extraídos de una población. La muestra se utiliza para realizar estimaciones sobre la población completa sin necesidad de medir a todos sus miembros. El tamaño y la calidad de la muestra son fundamentales para asegurar que las inferencias realizadas sean precisas y representativas. Una muestra puede ser aleatoria, estratificada o por conveniencia, dependiendo del método utilizado para su selección.</p>
</section>
<section id="población" class="level2">
<h2 class="anchored" data-anchor-id="población">Población</h2>
<p>La <strong>población</strong> se refiere al conjunto completo de individuos, elementos o unidades que comparten una característica particular que se está estudiando. Por ejemplo, si estamos interesados en el ingreso anual de todos los empleados de una empresa, la población sería todos los empleados. En la inferencia estadística, es crucial definir claramente la población para poder aplicar métodos de muestreo adecuados y realizar estimaciones precisas.</p>
</section>
</section>
<section id="estimación-puntual" class="level1">
<h1>Estimación puntual</h1>
<p>La <strong>estimación puntual</strong> se refiere al uso de un solo valor, calculado a partir de la muestra, para estimar un parámetro desconocido de la población. Este enfoque proporciona una respuesta única a la pregunta de interés, pero no informa sobre la precisión de la estimación. Por ejemplo, la media muestral <span class="math inline">\(\bar{x}\)</span> es una estimación puntual de la media poblacional (μ).</p>
<ul>
<li><p><strong>Media muestral:</strong> Se toma una muestra de los ingresos anuales de 100 empleados de una empresa. La media de estos ingresos en la muestra es de $50,000. Este valor se utiliza como una <strong>estimación puntual</strong> de la media de los ingresos de toda la población de empleados.</p></li>
<li><p><strong>Proporción muestral:</strong> En una encuesta realizada a 500 personas, 320 afirman que prefieren trabajar desde casa. La proporción muestral es <span class="math inline">\(\hat{p} = \frac{320}{500} = 0.64\)</span>, lo cual es una <strong>estimación puntual</strong> de la proporción real de personas que prefieren el trabajo remoto en la población general.</p></li>
<li><p><strong>Varianza muestral:</strong> Una muestra de 50 estudiantes tiene una varianza de puntajes en un examen de 16 puntos cuadrados. Este valor se utiliza como una <strong>estimación puntual</strong> de la varianza de los puntajes en la población completa de estudiantes.</p></li>
</ul>
<section id="estimadores-y-parámetros" class="level2">
<h2 class="anchored" data-anchor-id="estimadores-y-parámetros">Estimadores y parámetros</h2>
<p>Los estimadores son utilizados para estimar parámetros poblacionales. Algunos ejemplos incluyen:</p>
<ul>
<li><strong>Media muestral</strong> <span class="math inline">\(\bar{x}\)</span> para estimar la media poblacional (μ).</li>
<li><strong>Varianza muestral</strong> <span class="math inline">\(s^2\)</span> para estimar la varianza poblacional (σ²).</li>
<li><strong>Proporción muestral</strong> <span class="math inline">\(\hat{p}\)</span> para estimar la proporción poblacional (P).</li>
<li><strong>Correlación de Pearson</strong> <span class="math inline">\(\hat{\rho}\)</span> para estimar la correlacción poblacional <span class="math inline">\(\rho\)</span>.</li>
</ul>
</section>
<section id="aplicación-interactiva" class="level2">
<h2 class="anchored" data-anchor-id="aplicación-interactiva">Aplicación interactiva</h2>
<p>Para ilustrar la idea de estimación puntual, podemos estimar el número π utilizando simulaciones. Aquí tienes un recurso que permite interactuar con este concepto:</p>
<p><a href="https://seeing-theory.brown.edu/frequentist-inference/">Estimación puntual</a></p>
</section>
<section id="ley-de-los-grandes-números" class="level2">
<h2 class="anchored" data-anchor-id="ley-de-los-grandes-números">Ley de los Grandes Números</h2>
<p>La <strong>Ley de los Grandes Números</strong> es un principio fundamental en la teoría de la probabilidad que establece que, a medida que aumenta el tamaño de una muestra, la media muestral <span class="math inline">\(\bar{x}\)</span> se acercará a la media poblacional (μ) de la población de la que se extrajo la muestra. Esta ley se basa en la idea de que las fluctuaciones aleatorias tienden a cancelarse entre sí en muestras más grandes, lo que resulta en una estimación más precisa del parámetro poblacional.</p>
<p>Existen dos versiones de la Ley de los Grandes Números:</p>
<ol type="1">
<li><p><strong>Ley débil de los grandes números</strong>: Establece que, para cualquier valor ε positivo, la probabilidad de que la media muestral se desvíe de la media poblacional en más de ε tiende a cero a medida que el tamaño de la muestra (n) aumenta. Es decir, la media muestral se convierte en un estimador consistente de la media poblacional.</p></li>
<li><p><strong>Ley fuerte de los grandes números</strong>: Afirmación más fuerte que la versión débil, establece que la media muestral converge casi seguramente a la media poblacional a medida que n tiende al infinito. Esto significa que, con una probabilidad de 1, la media muestral se aproximará a la media poblacional a medida que se tomen más y más muestras.</p></li>
</ol>
<p>La Ley de los Grandes Números es fundamental en estadística y asegura que los resultados obtenidos de las muestras se volverán más representativos de la población a medida que se aumente el tamaño de la muestra, lo que permite realizar inferencias más confiables sobre la población completa.</p>
</section>
<section id="consistencia" class="level2">
<h2 class="anchored" data-anchor-id="consistencia">Consistencia</h2>
<p>Un <strong>estimador puntual</strong> es <strong>consistente</strong> si, a medida que el tamaño de la muestra aumenta, la estimación se aproxima cada vez más al verdadero parámetro poblacional. En otras palabras, un estimador consistente converge en probabilidad al parámetro que se está estimando. Esta propiedad es crucial porque asegura que con muestras más grandes, nuestras estimaciones se vuelven más precisas y confiables, reduciendo la variabilidad y el error de estimación.</p>
</section>
</section>
<section id="estimación-por-intervalo" class="level1">
<h1>Estimación por intervalo</h1>
<p>La <strong>estimación por intervalo</strong> proporciona un rango de valores dentro del cual se espera que se encuentre el parámetro poblacional con un cierto nivel de confianza. A diferencia de una estimación puntual, que ofrece un único valor, el intervalo de confianza incluye una medida de la incertidumbre asociada con la estimación. Esto permite a los investigadores entender no solo qué valor se estima, sino también la precisión y confiabilidad de dicha estimación.</p>
<section id="precisión-y-exactitud" class="level2">
<h2 class="anchored" data-anchor-id="precisión-y-exactitud">Precisión y Exactitud</h2>
<p><strong>Precisión</strong> y <strong>exactitud</strong> son dos conceptos fundamentales en la estadística y la investigación que se utilizan para evaluar la calidad de las estimaciones y mediciones. Aunque a menudo se utilizan de manera intercambiable en el lenguaje cotidiano, tienen significados distintos en el contexto estadístico.</p>
<section id="precisión" class="level3">
<h3 class="anchored" data-anchor-id="precisión">Precisión</h3>
<p>La <strong>precisión</strong> se refiere a la consistencia y reproducibilidad de las mediciones. Un conjunto de datos es preciso si las mediciones son cercanas entre sí, independientemente de si son correctas o no. En otras palabras, la precisión indica cuán dispersos están los valores en relación con la media. Un alto grado de precisión significa que las mediciones tienden a agruparse en torno a un valor central.</p>
<ul>
<li><strong>Ejemplo de Precisión:</strong> Supongamos que un grupo de científicos mide la temperatura de un líquido en tres ocasiones y obtiene los siguientes valores: 22.1°C, 22.0°C y 22.2°C. Aunque la medición puede no ser la temperatura real del líquido, los valores son consistentes entre sí, lo que indica alta precisión.</li>
</ul>
</section>
<section id="exactitud" class="level3">
<h3 class="anchored" data-anchor-id="exactitud">Exactitud</h3>
<p>La <strong>exactitud</strong>, por otro lado, se refiere a cuán cerca está una medición del valor verdadero o del objetivo. Una medición es exacta si se aproxima al valor real. En este caso, la exactitud evalúa la validez de los datos en relación con la realidad.</p>
<ul>
<li><strong>Ejemplo de Exactitud:</strong> Siguiendo el mismo ejemplo anterior, si la temperatura real del líquido es de 23.0°C y las mediciones obtenidas fueron 22.1°C, 22.0°C y 22.2°C, podemos decir que las mediciones son imprecisas a pesar de ser consistentes, ya que están lejos del valor verdadero.</li>
</ul>
</section>
<section id="diferencias-entre-precisión-y-exactitud" class="level3">
<h3 class="anchored" data-anchor-id="diferencias-entre-precisión-y-exactitud">Diferencias entre Precisión y Exactitud</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 19%">
<col style="width: 14%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th>Concepto</th>
<th>Definición</th>
<th>Enfoque</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Precisión</td>
<td>Consistencia y reproducibilidad de mediciones</td>
<td>Distribución de datos</td>
<td>Mediciones: 10.1, 10.0, 10.2 (altamente precisas pero no exactas si el valor verdadero es 11.0)</td>
</tr>
<tr class="even">
<td>Exactitud</td>
<td>Cercanía de las mediciones al valor verdadero</td>
<td>Proximidad al valor verdadero</td>
<td>Mediciones: 11.0, 11.1, 11.2 (altamente exactas si el valor verdadero es 11.0, aunque pueden no ser precisas si los valores no son consistentes)</td>
</tr>
</tbody>
</table>
<p>La precisión y exactitud son cruciales en la estadística y en el diseño de investigaciones. Una alta precisión en los resultados es deseable, pero no es suficiente por sí sola. Si los datos son precisos pero no exactos, las conclusiones extraídas pueden ser engañosas y llevar a decisiones erróneas.</p>
<ol type="1">
<li><p><strong>Diseño de Estudios:</strong> Durante el diseño de estudios, los investigadores deben asegurarse de que las herramientas de medición sean tanto precisas como exactas para obtener datos confiables.</p></li>
<li><p><strong>Interpretación de Resultados:</strong> La evaluación de la precisión y exactitud de los datos ayuda a los investigadores a entender la confiabilidad de sus estimaciones y a interpretar correctamente los resultados.</p></li>
<li><p><strong>Mejora de Métodos:</strong> Comprender la diferencia entre estos conceptos permite a los investigadores identificar áreas de mejora en sus métodos de recopilación de datos, ajustando su enfoque para aumentar tanto la precisión como la exactitud.</p></li>
</ol>
<p>Los conceptos de precisión y exactitud están intrínsecamente relacionados con los intervalos de confianza, ya que estos intervalos son una herramienta estadística diseñada para expresar la incertidumbre en torno a una estimación puntual. Un intervalo de confianza proporciona un rango de valores dentro del cual se espera que se encuentre el parámetro poblacional verdadero, lo que refleja la <strong>exactitud</strong> de la estimación. Si el intervalo es estrecho, indica una alta precisión en las mediciones, lo que sugiere que repetidas mediciones generarían resultados consistentes. Sin embargo, si el intervalo de confianza incluye valores muy alejados del verdadero parámetro, sugiere que la estimación puede no ser precisa. Por lo tanto, un intervalo de confianza bien construido no solo comunica la variabilidad de los datos, sino que también integra las nociones de precisión y exactitud en la evaluación de la validez de los resultados estadísticos.</p>
</section>
</section>
<section id="ejemplo-introductorio" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-introductorio">Ejemplo introductorio</h2>
<section id="intervalo-de-confianza-para-la-media" class="level3">
<h3 class="anchored" data-anchor-id="intervalo-de-confianza-para-la-media">Intervalo de confianza para la media</h3>
<p>Para calcular un intervalo de confianza para la media de una población, se puede utilizar la distribución t de Student o la distribución normal, dependiendo del tamaño de la muestra y de si se conoce la varianza poblacional.</p>
<ul>
<li><strong>Ejemplo:</strong> Supongamos que un investigador quiere estimar la media de la altura de los estudiantes de una universidad. Toma una muestra aleatoria de 30 estudiantes y calcula que la media muestral es de 1.70 metros con una desviación estándar de 0.10 metros. Dado que el tamaño de la muestra es pequeño, se utiliza la distribución t de Student. Si se quiere un nivel de confianza del 95%, el intervalo de confianza se calcula de la siguiente manera:</li>
</ul>
<p><span class="math display">\[IC = \bar{x} \pm t_{\alpha/2} \left(\frac{s}{\sqrt{n}}\right)\]</span></p>
<p>Donde <span class="math inline">\(t_{\alpha/2}\)</span> es el valor crítico de t correspondiente al nivel de confianza del 95% y 29 grados de libertad (n-1), (s) es la desviación estándar muestral y (n) es el tamaño de la muestra. Supongamos que <span class="math inline">\(t_{0.025} \approx 2.045\)</span> para este caso:</p>
<p><span class="math display">\[IC = 1.70 \pm 2.045 \left(\frac{0.10}{\sqrt{30}}\right) \approx 1.70 \pm 0.374\]</span></p>
<p>El intervalo de confianza sería aproximadamente (1.63, 1.77). Esto significa que el investigador puede estar 95% seguro de que la media de altura de todos los estudiantes está entre 1.63 y 1.77 metros.</p>
</section>
<section id="intervalo-de-confianza-para-una-proporción" class="level3">
<h3 class="anchored" data-anchor-id="intervalo-de-confianza-para-una-proporción">Intervalo de confianza para una proporción</h3>
<p>El <strong>intervalo de confianza para una proporción</strong> se calcula utilizando la proporción muestral <span class="math inline">\(\hat{p}\)</span> y el error estándar de la proporción. Se utiliza la distribución normal, ya que se asume que la proporción muestral sigue una distribución normal cuando el tamaño de muestra es suficientemente grande.</p>
<ul>
<li><strong>Ejemplo:</strong> Imaginemos que en una encuesta a 500 personas, 320 afirman que prefieren trabajar desde casa. La proporción muestral es:</li>
</ul>
<p><span class="math display">\[ \hat{p} = \frac{320}{500} = 0.64 \]</span></p>
<p>El intervalo de confianza se puede calcular de la siguiente manera:</p>
<p><span class="math display">\[ IC = \hat{p} \pm z_{\alpha/2} \sqrt{\frac{\hat{p}(1 - \hat{p})}{n}} \]</span></p>
<p>Si elegimos un nivel de confianza del 95%, <span class="math inline">\(z_{0.025} \approx 1.96\)</span>:</p>
<p><span class="math display">\[ IC = 0.64 \pm 1.96 \sqrt{\frac{0.64 \times (1 - 0.64)}{500}} \approx 0.64 \pm 0.045 \]</span></p>
<p>Esto resulta en un intervalo de confianza de (0.595, 0.685). Por lo tanto, el investigador puede estar 95% seguro de que la proporción real de personas que prefieren trabajar desde casa en la población general está entre el 59.5% y el 68.5%.</p>
</section>
<section id="intervalo-de-confianza-para-la-varianza" class="level3">
<h3 class="anchored" data-anchor-id="intervalo-de-confianza-para-la-varianza">Intervalo de confianza para la varianza</h3>
<p>El <strong>intervalo de confianza para la varianza</strong> se calcula utilizando la distribución chi-cuadrado. La varianza muestral (s²) es el estimador puntual, y el intervalo se ajusta de acuerdo con la distribución de esta varianza bajo el supuesto de normalidad.</p>
<ul>
<li><strong>Ejemplo:</strong> Supongamos que un investigador mide los tiempos de espera en una fila y obtiene una varianza muestral de (s^2 = 16) minutos² con una muestra de 15 observaciones. Para calcular un intervalo de confianza del 95% para la varianza poblacional, se utiliza la fórmula:</li>
</ul>
<p><span class="math display">\[ IC = \left(\frac{(n-1)s^2}{\chi^2_{\alpha/2}}, \frac{(n-1)s^2}{\chi^2_{1-\alpha/2}}\right) \]</span></p>
<p>Donde (n) es el tamaño de la muestra y (^2) son los valores críticos de la distribución chi-cuadrado. Si (n=15) y con un nivel de confianza del 95%, se pueden encontrar los valores críticos:</p>
<p><span class="math display">\[ IC = \left(\frac{(15-1) \times 16}{\chi^2_{0.025, 14}}, \frac{(15-1) \times 16}{\chi^2_{0.975, 14}}\right) \]</span></p>
<p>Si <span class="math inline">\(\chi^2_{0.025, 14} \approx 27.688\)</span> y <span class="math inline">\(\chi^2_{0.975, 14} \approx 5.629\)</span>:</p>
<p><span class="math display">\[ IC \approx \left(\frac{14 \times 16}{27.688}, \frac{14 \times 16}{5.629}\right) \approx (8.520, 39.658) \]</span></p>
<p>Esto significa que el investigador puede estar 95% seguro de que la varianza del tiempo de espera en la población está entre 8.520 y 39.658 minutos².</p>
</section>
</section>
<section id="aplicación-interactiva-1" class="level2">
<h2 class="anchored" data-anchor-id="aplicación-interactiva-1">Aplicación interactiva</h2>
<p>Para ilustrar la idea de estimación por intervalo, puedes utilizar simulaciones interactivas que permiten explorar estos conceptos. Aquí tienes un recurso que permite interactuar con este concepto:</p>
<p><a href="https://seeing-theory.brown.edu/frequentist-inference/">Estimación por intervalo</a></p>
</section>
<section id="consistencia-1" class="level2">
<h2 class="anchored" data-anchor-id="consistencia-1">Consistencia</h2>
<p>Un <strong>intervalo de confianza</strong> es considerado <strong>consistente</strong> si, al aumentar el tamaño de la muestra, la longitud del intervalo tiende a reducirse. Esto indica que la estimación se vuelve más precisa y refleja mejor el parámetro poblacional.</p>
</section>
<section id="construcción-de-los-intervalos-de-confianza" class="level2">
<h2 class="anchored" data-anchor-id="construcción-de-los-intervalos-de-confianza">Construcción de los intervalos de confianza</h2>
<p>La construcción de intervalos de confianza puede realizarse de dos maneras:</p>
<ol type="1">
<li><p><strong>Método analítico</strong>: Utiliza fórmulas y propiedades matemáticas para calcular los intervalos de confianza. Este método es eficiente cuando se cumplen las condiciones necesarias, como la normalidad de los datos.</p></li>
<li><p><strong>Método computacional</strong>: Utiliza técnicas de remuestreo, como el bootstrapping, para estimar la distribución del estimador y generar intervalos de confianza sin necesidad de asumir una distribución específica.</p></li>
</ol>
</section>
<section id="ventajas-y-desventajas-de-la-construcción-analítica" class="level2">
<h2 class="anchored" data-anchor-id="ventajas-y-desventajas-de-la-construcción-analítica">Ventajas y desventajas de la construcción analítica</h2>
<p>La construcción analítica de los intervalos de confianza presenta pros y contras</p>
<ul>
<li><p><strong>Ventajas</strong>: - Menor costo computacional, ya que implica cálculos directos a partir de los datos. - Resultados más rápidos si se cumplen los supuestos de normalidad.</p></li>
<li><p><strong>Desventajas</strong>: - Dependencia de supuestos que pueden no cumplirse en datos reales. - Puede no ser adecuado para distribuciones no estándar o en situaciones de muestras pequeñas.</p></li>
</ul>
</section>
<section id="ventajas-y-desventajas-de-la-construcción-computacional" class="level2">
<h2 class="anchored" data-anchor-id="ventajas-y-desventajas-de-la-construcción-computacional">Ventajas y desventajas de la construcción computacional</h2>
<p>La construcción computacional de los intervalos de confianza presenta pros y contras</p>
<ul>
<li><p><strong>Ventajas</strong>: - Flexible, ya que no depende de supuestos sobre la distribución de los datos. - Adecuado para cualquier tipo de muestra y variabilidad en los datos.</p></li>
<li><p><strong>Desventajas</strong>: - Puede ser intensivo en recursos computacionales, especialmente para grandes volúmenes de datos. - Mayor tiempo de procesamiento y necesidad de software especializado.</p></li>
</ul>
</section>
<section id="fórmulas-para-algunos-intervalos" class="level2">
<h2 class="anchored" data-anchor-id="fórmulas-para-algunos-intervalos">Fórmulas para algunos intervalos</h2>
<ul>
<li><strong>Intervalo de confianza para la media</strong>:</li>
</ul>
<p><span class="math display">\[IC = \bar{x} \pm z\_{\alpha/2} \left(\frac{\sigma}{\sqrt{n}}\right) \quad \text{(si } \sigma \text{ es conocido)}\]</span></p>
<p><span class="math display">\[IC = \bar{x} \pm t\_{\alpha/2} \left(\frac{s}{\sqrt{n}}\right) \quad \text{(si } \sigma \text{ es desconocido)}\]</span></p>
<ul>
<li><strong>Intervalo de confianza para la proporción</strong>:</li>
</ul>
<p><span class="math display">\[IC = \hat{p} \pm z\_{\alpha/2} \sqrt{\frac{\hat{p}(1 - \hat{p})}{n}}\]</span></p>
<ul>
<li><strong>Intervalo de confianza para la varianza</strong>:</li>
</ul>
<p><span class="math display">\[ IC = \left(\frac{(n-1)s^2}{\chi^2_{\alpha/2}}, \frac{(n-1)s^2}{\chi^2_{1-\alpha/2}}\right) \]</span></p>
</section>
</section>
<section id="bootstrapping" class="level1">
<h1>Bootstrapping</h1>
<p>El <strong>bootstrapping</strong> es un método no paramétrico que se utiliza para estimar la distribución de un estimador y, por ende, sus intervalos de confianza. Este método genera múltiples muestras simuladas (con reemplazo) de la muestra original, permitiendo construir un intervalo de confianza sin depender de la distribución subyacente de los datos.</p>
<section id="ejemplo-diferencia-de-medias" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-diferencia-de-medias">Ejemplo: Diferencia de medias</h2>
<p>Para evaluar la <strong>diferencia de medias</strong> entre dos poblaciones, se construye un intervalo de confianza alrededor de la diferencia de medias muestrales. Dependiendo de si se asumen varianzas iguales o diferentes, se pueden aplicar diferentes métodos, como el uso de la distribución t de Student o el método de bootstrapping.</p>
<ul>
<li><strong>Ejemplo</strong>: Supongamos que queremos comparar las alturas promedio de hombres y mujeres en una población. Recogemos datos de 50 hombres y 50 mujeres y encontramos que la media de los hombres es 1.80 metros y la media de las mujeres es 1.65 metros. La diferencia de medias es 0.15 metros. Aplicando el bootstrapping, podemos crear múltiples muestras de nuestras muestras originales para estimar la distribución de la diferencia de medias y, así, construir un intervalo de confianza.</li>
</ul>
</section>
<section id="ejemplo-diferencia-de-proporciones" class="level2">
<h2 class="anchored" data-anchor-id="ejemplo-diferencia-de-proporciones">Ejemplo: Diferencia de proporciones</h2>
<p>El <strong>intervalo de confianza para la diferencia de proporciones</strong> entre dos poblaciones se construye de manera similar al de una proporción, pero utilizando la diferencia entre las proporciones muestrales. Dependiendo de si se asume o no la homogeneidad de varianzas entre las dos proporciones, se pueden aplicar diferentes métodos.</p>
<ul>
<li><strong>Ejemplo</strong>: Si en una encuesta a 300 hombres, el 70% responde que prefiere el trabajo remoto, y en una encuesta a 250 mujeres, el 60% responde lo mismo, la diferencia de proporciones es 0.10. Para construir un intervalo de confianza, podemos aplicar el bootstrapping para simular la diferencia de proporciones y calcular el intervalo.</li>
</ul>
</section>
<section id="bootstrapping-ejemplo" class="level2">
<h2 class="anchored" data-anchor-id="bootstrapping-ejemplo">Bootstrapping ejemplo</h2>
<p>Para explorar el método de bootstrapping, puedes interactuar con simulaciones que permiten visualizar cómo funciona este proceso en la práctica. Aquí tienes un recurso que permite interactuar con este concepto:</p>
<p><a href="https://seeing-theory.brown.edu/frequentist-inference/">Bootstrapping</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>